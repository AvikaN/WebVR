<script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>
 
 <script> 
    var AMOUNTX= 25, AMOUNTY = 25,  SEPARATION = 100, count = 0;
    var YDISPLACE = -200; 


    var MAX = 920, MIN = -1000 
    //build a mesh object that contains all the spheres
    AFRAME.registerComponent('blanket', {
        init: function(){
            this.circles = [];
            for( var ix = 0; ix < AMOUNTX; ix++ ){
              for( var iy = 0; iy < AMOUNTY; iy++ ){
                 var entity = document.createElement('a-sphere');
                 var position = new THREE.Vector3();
                 position.x =  ix * SEPARATION - ( ( AMOUNTX * SEPARATION ) / 2 );
                 position.z =  iy * SEPARATION - ( ( AMOUNTY * SEPARATION ) / 2 ); 
                 position.y = YDISPLACE;

                 var colorx = parseInt(map_range(position.x , MIN, MAX, 50 , 255));
                 var colorz = parseInt(map_range(position.y, MIN, MAX, 50, 255));
                 entity.setAttribute("position", position);
                 entity.setAttribute("radius", "2.5");
                 var color = "rgb(" + colorx + "," + colorz + ", 140)";
                 entity.setAttribute("color", color);

                 this.el.sceneEl.appendChild(entity);
                 this.circles.push(entity);
              }
            }
        }, 

        tick: function(){
            var i = 0;
            //console.log(c.getAttribute('position'));
            for ( var ix = 0; ix < AMOUNTX; ix ++ ) {
              for ( var iy = 0; iy < AMOUNTY; iy ++ ) {
                   var particle = this.circles[i];
                   var pos = particle.getAttribute("position");
                   var y = (Math.sin((ix + count ) * 0.6 ) * 50) + (Math.sin( (iy + count) * 0) * 5) + YDISPLACE;
                   var newPos = new THREE.Vector3();
                   newPos.x = pos.x, newPos.y = y, newPos.z = pos.z; 
                   this.circles[i].setAttribute("position", newPos);
                   i++; 
              }
            } 
            count += 0.10;
        }
    }); 

    function map_range(value, low1, high1, low2, high2) {
        return low2 + (high2 - low2) * (value - low1) / (high1 - low1);
    }
 </script> 

 <a-scene>
     <a-sky color="black"> </a-sky> 
     <!-- ~~ lights --> 
     <a-light type="point" color="white" position="0 5 0"></a-light>
     <a-entity blanket> </a-entity> 
     <a-camera position="0 0 0"> </a-camera> 
 </a-scene> 